(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(46)},35:function(e,t,n){},36:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),c=n.n(r),s=(n(35),n(36),n(11)),l=n(26),u=n(22),i=n(1),m=n(2),d=n(27);function p(e){return fetch(e).then(function(e){return e.json()})}var h,f="show_post",b="hide_post",P="create_post",w="change_new_post_title",E="change_new_post_text",y="save_post",v="cancel_save_post",g="change_page",C="show_comments",M="hide_comments",j="show_author",O="hide_author",I="fill_data",T="https://jsonplaceholder.typicode.com/";function N(){return function(e){Promise.all([p("".concat(T,"posts")),p("".concat(T,"users")),p("".concat(T,"comments"))]).then(function(t){var n=Object(d.a)(t,3),a=n[0],o=n[1],r=n[2];e({type:I,payload:{posts:a,users:o,comments:r}})})}}function k(e){return{type:C,payload:e}}function x(e){return{type:j,payload:e}}function A(e){return{type:f,payload:e}}function V(){return{type:b}}var _={dataLoaded:!1,usersMap:null,comments:null,posts:null,currentPostId:null,currentUserId:null,isModalCommentsVisible:!1,isModalAuthorVisible:!1,postCreating:null,newPostTitle:"",newPostText:"",newPost:null,activePage:1},U=(h={},Object(i.a)(h,I,function(e,t){return Object(m.a)({},e,{dataLoaded:!0,usersMap:t.payload.users.reduce(function(e,t){return Object(m.a)({},e,Object(i.a)({},t.id,t))},{}),comments:t.payload.comments,posts:t.payload.posts})}),Object(i.a)(h,C,function(e,t){return Object(m.a)({},e,{isModalCommentsVisible:!0,currentPostId:t.payload})}),Object(i.a)(h,M,function(e){return Object(m.a)({},e,{isModalCommentsVisible:!1,currentPostId:null})}),Object(i.a)(h,j,function(e,t){return Object(m.a)({},e,{isModalAuthorVisible:!0,currentUserId:t.payload})}),Object(i.a)(h,O,function(e){return Object(m.a)({},e,{isModalAuthorVisible:!1,currentUserId:null})}),Object(i.a)(h,f,function(e,t){return Object(m.a)({},e,{currentPostId:t.payload})}),Object(i.a)(h,b,function(e){return Object(m.a)({},e,{currentPostId:null})}),Object(i.a)(h,P,function(e){return Object(m.a)({},e,{postCreating:!0})}),Object(i.a)(h,w,function(e,t){return Object(m.a)({},e,{newPostTitle:t.payload})}),Object(i.a)(h,E,function(e,t){return Object(m.a)({},e,{newPostText:t.payload})}),Object(i.a)(h,y,function(e){return Object(m.a)({},e,{newPost:{userId:1,title:e.newPostTitle.trim(),text:e.newPostText.trim()},newPostTitle:"",newPostText:"",postCreating:!1})}),Object(i.a)(h,v,function(e){return Object(m.a)({},e,{newPostTitle:"",newPostText:"",postCreating:null})}),Object(i.a)(h,g,function(e,t){return Object(m.a)({},e,{activePage:t.payload})}),h),L=n(9),S=n(23),B=n(24),D=n(28),J=n(25),W=n(29),F=n(15),R=n.n(F);function $(e){var t=e.body;return o.a.createElement("li",null,o.a.createElement("span",null,t))}function q(e){var t=e.comments,n=e.currentPostId;return t.map(function(e){return e.postId===n?o.a.createElement($,{key:e.id,body:e.body}):null})}function z(e){var t=e.isModalCommentsVisible,n=e.hideModalComments,a=e.currentPostId,r=e.comments;return o.a.createElement(R.a,{visible:t,width:"70%",height:"70%",effect:"fadeInLeft",onClickAway:function(){return n()}},o.a.createElement("section",{className:"modal"},o.a.createElement("h1",null,"PostId",a),o.a.createElement(q,{comments:r,currentPostId:a}),o.a.createElement("button",{type:"button",className:"button",onClick:function(){return n()}},"Close")))}function G(e){var t=e.posts,n=e.comments,a=e.currentPostId,r=e.hidePost,c=t.filter(function(e){return e.id===a});return o.a.createElement("section",{className:"postComments"},o.a.createElement("h1",null,c[0].title),o.a.createElement("p",null,c[0].body),o.a.createElement(q,{currentPostId:a,comments:n}),o.a.createElement("button",{className:"button",type:"button",onClick:r},"Back to posts"))}var H=Object(L.a)(function(e){return{isModalCommentsVisible:e.isModalCommentsVisible,isModalAuthorVisible:e.isModalAuthorVisible,comments:e.comments,usersMap:e.usersMap}},function(e){return{showModalAuthor:function(t){return e(x(t))},showModalComments:function(t){return e(k(t))},showPost:function(t){return e(A(t))},hidePost:function(){return e(V())}}})(function(e){var t=e.showModalComments,n=e.showModalAuthor,a=e.showPost,r=e.userId,c=e.title,s=e.id;return o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("span",null,s)),o.a.createElement("td",null,o.a.createElement("p",{className:"title",onClick:function(){return a(s)}},c)),o.a.createElement("td",null,o.a.createElement("p",{className:"title",onClick:function(){return t(s)}},"Comments")),o.a.createElement("td",null,o.a.createElement("p",{className:"title",onClick:function(){return n(r)}},"Author",r)))});function K(e){var t=e.user;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,t.name),o.a.createElement("h5",null,t.email))}function Q(e){var t=e.isModalAuthorVisible,n=e.hideModalAuthor,a=e.currentUserId,r=e.user;return o.a.createElement(R.a,{visible:t,width:"40%",height:"40%",effect:"fadeInRight",onClickAway:function(){return n()}},o.a.createElement("section",{className:"modal"},o.a.createElement("h1",null,"UserId",a),a?o.a.createElement(K,{user:r}):null,o.a.createElement("button",{type:"button",className:"button",onClick:function(){return n()}},"Close")))}function X(e){var t=e.posts,n=e.activePage,a=e.changePage,r=Math.ceil(t.length/10);return new Array(r).fill(1).map(function(e,t){var r=t+1;return o.a.createElement("button",{type:"button",className:n!==r?"button":"button active",onClick:function(){return a(r)},key:Math.random()},r)})}function Y(e){var t=e.changeNewPostTitle,n=e.changeNewPostText,a=e.cancelSavePost,r=e.newPostTitle,c=e.newPostText,s=e.savePost;return o.a.createElement("form",null,o.a.createElement("section",null,o.a.createElement("input",{type:"text",placeholder:"title",className:"input",onChange:function(e){return t(e)}}),o.a.createElement("input",{type:"text",placeholder:"text",className:"input",onChange:function(e){return n(e)}})),o.a.createElement("section",{className:"form_button"},o.a.createElement("button",{type:"button",className:"button",onClick:function(){if(""!==r.trim()&&""!==c.trim())return s();alert("please fill the empty fields")}},"Save"),o.a.createElement("button",{type:"button",className:"button",onClick:a},"Cancel")))}var Z=function(e){function t(){return Object(S.a)(this,t),Object(D.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.props.loadData()}},{key:"render",value:function(){var e,t,n=this.props,a=n.isModalCommentsVisible,r=n.isModalAuthorVisible,c=n.hideModalComments,s=n.hideModalAuthor,l=n.changeNewPostTitle,u=n.changeNewPostText,i=n.cancelSavePost,m=n.currentPostId,d=n.currentUserId,p=n.postCreating,h=n.dataLoaded,f=n.activePage,b=n.newPostTitle,P=n.newPostText,w=n.changePage,E=n.createPost,y=n.savePost,v=n.hidePost,g=n.usersMap,C=n.comments,M=n.posts;if(p)return o.a.createElement(Y,{changeNewPostTitle:l,changeNewPostText:u,cancelSavePost:i,newPostTitle:b,newPostText:P,savePost:y});if(m&&!a)return o.a.createElement(G,{currentPostId:m,comments:C,hidePost:v,posts:M});if(h){var j=(e=10,t=f,t-=1,M.slice(t*e,(t+1)*e)).map(function(e,t){return o.a.createElement(H,{userId:e.userId,title:e.title,body:e.body,index:t,key:e.id,id:e.id})});return o.a.createElement("div",null,o.a.createElement(Q,{isModalAuthorVisible:r,hideModalAuthor:s,user:g[d],currentUserId:d}),o.a.createElement(z,{isModalCommentsVisible:a,hideModalComments:c,currentPostId:m,comments:C}),o.a.createElement("button",{type:"button",className:"button createPost",onClick:E},"Create Post"),o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Id"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Comments"),o.a.createElement("th",null,"User"))),o.a.createElement("tbody",null,j)),o.a.createElement("section",{className:"pagination"},o.a.createElement(X,{posts:M,activePage:f,changePage:w})))}return o.a.createElement("h1",{className:"loading"},"Loading...")}}]),t}(a.Component);var ee=Object(L.a)(function(e){return{isModalCommentsVisible:e.isModalCommentsVisible,isModalAuthorVisible:e.isModalAuthorVisible,currentPostId:e.currentPostId,currentUserId:e.currentUserId,postCreating:e.postCreating,newPostTitle:e.newPostTitle,newPostText:e.newPostText,activePage:e.activePage,dataLoaded:e.dataLoaded,comments:e.comments,usersMap:e.usersMap,posts:e.posts}},function(e){return{changeNewPostTitle:function(t){return e((n=t.target.value,{type:w,payload:n}));var n},changeNewPostText:function(t){return e((n=t.target.value,{type:E,payload:n}));var n},showModalComments:function(t){return e(k(t))},hideModalComments:function(){return e({type:M})},showModalAuthor:function(t){return e(x(t))},hideModalAuthor:function(){return e({type:O})},cancelSavePost:function(){return e({type:v})},changePage:function(t){return e({type:g,payload:t})},createPost:function(){return e({type:P})},showPost:function(t){return e(A(t))},hidePost:function(){return e(V())},savePost:function(){return e((alert("Saved successful!"),{type:y}))},loadData:function(){return e(N())}}})(Z),te=Object(s.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=U[t.type];return n?n(e,t):e},Object(s.a)(u.a));var ne=function(){return o.a.createElement(l.a,{store:te},o.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.22bc2042.chunk.js.map